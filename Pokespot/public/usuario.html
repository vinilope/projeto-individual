<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <script src="https://kit.fontawesome.com/384071f692.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/pokedex.css">
    <link rel="stylesheet" href="css/pesquisa.css">
    <link rel="stylesheet" href="css/usuario.css">
</head>

<body>
    <header>
        <div class="container">
            <div class="logo">
                <img src="assets/img/icon/logo_pkspt.png" alt="">
            </div>
            <div class="container-search">
                <input class="px-border" onkeyup="getPokemonData(pkmn_pesquisado.value)" id="pkmn_pesquisado"
                    placeholder="Pesquisar..." type="text">
                <img src="assets/img/icon/lupa.png" alt="" class="lupa">
            </div>
        </div>
    </header>
    <div id="mySidenav" class="sidenav">
        <ul>
            <li><a href="index.html">Início</a></li>
            <li><a href="pokedex.html">Pokedéx</a></li>
        </ul>
        <ul class="lista">
            <li class="name-pfp"><img class="profile-img" src="assets/img/icon/default.png" alt="">Treinador</li>
            <li class="name-pfp"><img class="logout-img" src="assets/img/icon/logout.png" alt="">Sair</li>
        </ul>
    </div>
    <main id="main_container">

        <div style="margin-top: 140px" id="trainer_wrap" class="trainer-wrap"></div>
        <divs style="margin-top: 0;" id="pokemon_wrap"></div>
        <div id="pokemon_info"></div>
    </main>
</body>

</html>
<script src="script/user_pokemon.js"></script>

<script>
    trainer_wrap.innerHTML = `
            <h1 class="trainer-name">${sessionStorage.NOME_USUARIO}</h1>
            <div class="px-border number-wrap">
                <h5>Entrou há</h5>
                <span>${sessionStorage.DIAS_CONSECUTIVOS}</span>
                <h5>dias seguidos!</h5>
            </div>
        `;

    function closeInfo() {
        pokemon_info.style.display = 'none';
        pokemon_wrap.style.display = 'flex';
    }

    function showPokemonInfo(fkP) {
        var id = fkP - 1;

        var pokeTreID = allPkmn[id].idPokeTre;
        var pokeID = allPkmn[id].idPokemon;
        var apelido = allPkmn[id].apelido;
        var especie = allPkmn[id].especie;
        var peso = allPkmn[id].peso / 10 + ' kg';
        var altura = allPkmn[id].altura / 10 + ' m';
        var dtAdquirido = convertDate(allPkmn[id].dtAdquirido);
        var tipos = getTypePokemon(allPkmn[id]);
        var sprite = allPkmn[id].normal;

        pokemon_wrap.style.display = 'none';
        pokemon_info.style.display = 'flex';

        pokemon_info.innerHTML = `
            <div class="info-card px-border">
                <div class="info-close-wrap">
                    <img onclick="closeInfo()" class="info-item qt-mark" src="assets/img/icon/question-mark.png" alt="">
                    <img onclick="closeInfo()" class="info-item close" src="assets/img/icon/down-arrow.png" alt="">
                </div>

                <h5>${pokeID}</h5> 
                <div class="rename-wrap">
                    <h2 id="apelido_h2" contenteditable="true">${apelido}</h2>
                    <img onclick="renomear(${pokeTreID})" class="icon rename" src="assets/img/icon/rename.png">
                </div>
                <div class="img-wrap">
                    <img src="https://img.pokemondb.net/sprites/${sprite}" class="card-info-img">
                </div>

                <div class="type-wrap">
                    <span class="tipo-pokemon">${tipos}</span>
                </div>

                <div class="info-wrap">
                    <ul>
                        <li><span>Espécie: <b>${especie}</b></span></li>
                        <li><span>Altura: ${altura}</span></li>
                        <li><span>Peso: ${peso}</span></li>
                    </ul>
                </div>
                <span class="info-date">
                    Adquirido em: ${dtAdquirido}
                </span>
            </div>
        `;
    }

    function convertDate(data) {
        var date = new Date(data);

        var dia = date.getDate();
        var mes = date.getMonth() + 1;
        var ano = date.getFullYear();

        return (`${dia}/${mes}/${ano}`)
    }

</script>