<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página Inicial</title>
    <link rel="icon" href="assets/img/icon/tab-icon-pkb.gif">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/pokedex.css">
</head>

<body>
    <header>
        <div class="container">
            <div class="logo">
                <a href="index.html"><img src="assets/img/icon/logo_pkspt.png" alt=""></a>
            </div>
            <div id="container_cadastro" class="container-cadastro-btn">
            </div>
        </div>
    </header>

    <div id="side_menu" class="sideMenu display-none-on-start">
        <ul class="menu-item">
            <li><a href="index.html">
                    <img src="assets/img/icon/down-arrow-gray.png" class="down-arrow">
                    <span>Início</span>
            </a></li>
            <li><a href="pokedex.html">
                    <img src="assets/img/icon/down-arrow-gray.png" class="down-arrow">
                    <span>Pokedéx</span>
            </a></li>
            <li><a href="ajuda.html">
                    <img src="assets/img/icon/down-arrow-gray.png" class="down-arrow">
                    <span>Ajuda</span>
            </a></li>
        </ul>
        <ul id="account_ul" class="account-ul">
        </ul>
    </div>

    <section id="section_pkb" class="section-pkb">
        <div id="div_pkb" class="container-pkb">
            <div class="pkb-white"></div>
            <div class="black-strip">
                <button class="pkb-btn" onclick="iniciarComPokebola()">
                    <div class="pkb-circle"></div>
                </button>
            </div>
        </div>
    </section>

    <main class="display-none-on-start" id="main_container">
        <div id="inicio"></div>
        <section>
            <div class="ranking-wrap px-border">
                <h3 class="titulo-ranking"><img src="assets/img/icon/down-arrow-white.png" alt="">Top 10 jogadores</h3>
                <ul id="ranking" class="ranking-list">
                    
                </ul>
            </div>
        </section>
        <section>
            <div class="content-wrap px-border">
                <div class="titulo">
                    <h1>Bem-vindo ao Mundo Pokémon!</h1>
                </div>
                <div class="introducao">
                    <span>Desde 1996, esta franquia tem encantado fãs com suas criaturas mágicas e aventuras
                        emocionantes. Neste site, exploraremos os jogos, desenhos animados, filmes e o impacto cultural
                        dos Pokémon, celebrando a diversidade e amizade que definem esse universo. Seja você um
                        treinador experiente ou novato, sempre há algo novo para descobrir nesse emocionante
                        mundo!</span>

                    <img src="assets/img/prof/oak-prof.png" alt="">
                </div>
            </div>
        </section>

        <section class="galeria-section">
            <div class="titulo">
                <h1>Melhores Pokémon!</h1>
            </div>
            <div class="pkmn-galeria ">
                <ul>
                    <li>
                        <div class="pokemon-card">
                            <span class="titulo-id">1</span>
                            <span class="titulo-nome">Mudkip</span>
                            <img src="assets/img/pkmn/mudkip.png" alt="">
                        </div>
                    </li>
                    <li>
                        <div class="pokemon-card">
                            <span class="titulo-id">1</span>
                            <span class="titulo-nome">Mudkip</span>
                            <img src="assets/img/pkmn/mudkip.png" alt="">
                        </div>
                    </li>
                    <li>
                        <div class="pokemon-card">
                            <span class="titulo-id">1</span>
                            <span class="titulo-nome">Mudkip</span>
                            <img src="assets/img/pkmn/mudkip.png" alt="">
                        </div>
                    </li>
                    <li>
                        <div class="pokemon-card">
                            <span class="titulo-id">1</span>
                            <span class="titulo-nome">Mudkip</span>
                            <img src="assets/img/pkmn/mudkip.png" alt="">
                        </div>
                    </li>
                    <li>
                        <div class="pokemon-card">
                            <span class="titulo-id">1</span>
                            <span class="titulo-nome">Mudkip</span>
                            <img src="assets/img/pkmn/mudkip.png" alt="">
                        </div>
                    </li>
                </ul>
            </div>
        </section>

        <section class="text-section">
            <div class="content-wrap px-border">
                <div class="text">
                    <img src="assets/img/prof/juniper-prof.png" alt="">
                    <div class="text-item">
                        <div class="titulo">
                            <h1>Lorem ipsum dolor!</h1>
                        </div>
                        <span>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Quia perspiciatis obcaecati
                            possimus
                            dolor sequi recusandae quam libero eligendi expedita illum sapiente, eos aliquid. Quos
                            expedita
                            voluptatibus molestiae, deleniti cum accusantium?</span>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="display-none-on-start" id="footer_container">
        <div class="display-none-on-start" id="container_pkmn"><img id="pkmn" class="following-pkmn"
                src="https://img.pokemondb.net/sprites/sword-shield/icon/charmander.png"></div>
        <div class="container">
            <div class="logo">
                <img src="assets/img/icon/logo_pkspt.png" alt="">
            </div>
        </div>
    </footer>
</body>

</html>
<script src="scripts/navegacao_geral.js"></script>
<script src="scripts/navbar_login.js"></script>
<script src="scripts/pkmn_follows.js"></script>

<script>
    if (sessionStorage.ID_USUARIO || sessionStorage.EXIBIR_POKEBOLA) {
        iniciarSemPokebola();
    }
    buscarRankingUsuario()

    function iniciarComPokebola() {
        sessionStorage.EXIBIR_POKEBOLA = true;
        elementos = document.querySelectorAll('.display-none-on-start')
        div_pkb.style.transform = 'rotate(90deg)';

        setTimeout(() => {
            div_pkb.style.marginLeft = '-109%';
            main_container.style.display = 'flex';
            footer_container.style.display = 'flex';
            container_pkmn.style.display = 'flex';
            side_menu.style.display = 'block';
            setTimeout(() => {
                for (var i = 0; i < elementos.length; i += 1) {
                    elementos[i].style.visibility = 'visible';
                    elementos[i].style.opacity = '1';
                }
                section_pkb.style.display = 'none';
            }, 500);
        }, 1000);
    }

    function iniciarSemPokebola() {
        elementos = document.querySelectorAll('.display-none-on-start')
        div_pkb.style.transform = 'rotate(90deg)';

        div_pkb.style.marginLeft = '-109%';
        main_container.style.display = 'flex';
        footer_container.style.display = 'flex';
        container_pkmn.style.display = 'flex';
        side_menu.style.display = 'block';

        for (var i = 0; i < elementos.length; i += 1) {
            elementos[i].style.visibility = 'visible';
            elementos[i].style.opacity = '1';
        }
        section_pkb.style.display = 'none';
    }

        
   function buscarRankingUsuario() {
        fetch("/analytics/buscarRankingUsuario", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            }
        }).then(function (resposta) {
            if (resposta.ok) {
                console.log(resposta);

                resposta.json().then(json => {
                    var users = json.user
                    popularRanking(users)
                });

            } else {
                console.log("Houve um erro ao tentar realizar o login!");

                resposta.text().then(texto => {
                    console.error(texto);
                });
            }

        }).catch(function (erro) {
            console.log(erro);
        })
    }

    function popularRanking(users) {
        for (let i = 0; i < users.length; i++) {
            ranking.innerHTML += 
                `<li>
                    <h3><span class="hashtag">#</span>${i+1}</h3>
                    <span class="nome-ranking">${users[i].nome}</span>
                    <span class="qtd-poke-ranking">${users[i].qtd} <small>pokémon</small></span>
                </li>`;
        }
    }

</script>